<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Jekyll_format.html">
<link rel="next" href="Jekyll_liquid.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Jekyll_post" rel="Chapter" href="Jekyll_post.html">
<link title="Jekyll_format" rel="Chapter" href="Jekyll_format.html">
<link title="Jekyll_tags" rel="Chapter" href="Jekyll_tags.html">
<link title="Jekyll_liquid" rel="Chapter" href="Jekyll_liquid.html"><link title="General tag parsing" rel="Section" href="#1_Generaltagparsing">
<link title="Jekyll liquid tag parsing functions" rel="Section" href="#1_Jekyllliquidtagparsingfunctions">
<title>Jekyll_tags</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Jekyll_format.html" title="Jekyll_format">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Jekyll_liquid.html" title="Jekyll_liquid">Next</a>
</div>
<h1>Module <a href="type_Jekyll_tags.html">Jekyll_tags</a></h1>

<pre><span class="keyword">module</span> Jekyll_tags: <code class="code"><span class="keyword">sig</span></code> <a href="Jekyll_tags.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Parse Jekyll-format delimited tags from message bodies<br>
</div>
<hr width="100%">
<br>
<h1 id="1_Generaltagparsing">General tag parsing</h1><br>

<pre><span id="VALextract_tag"><span class="keyword">val</span> extract_tag</span> : <code class="type">?start:int -><br>       start_tag:string -> stop_tag:string -> string -> (int * string * int) option</code></pre><div class="info ">
<code class="code">extract_tag ?start ~start_tag ~stop_tag s</code> will extract the indices that
    represents the <code class="code">text</code> in <code class="code"><span class="string">"&lt;start&gt;&lt;ws&gt;&lt;text&gt;&lt;ws&gt;&lt;stop&gt;"</span></code>. Whitespace
    is trimmed, and <code class="code"><span class="constructor">None</span></code> is returned if non-empty text could not
    be parsed.<br>
<b>Returns</b> starting index of the tag within the string, the tag contents
     with whitespace trimmed, and the index of the first character after 
     the end tag (which may be out of bounds of the string)<br>
</div>

<pre><span id="VALextract_tags"><span class="keyword">val</span> extract_tags</span> : <code class="type">?start:int -><br>       start_tag:string -> stop_tag:string -> string -> (int * string * int) list</code></pre><div class="info ">
<code class="code">extract_tags ?start ~start_tag ~stop_tag s</code> will extract the list of
    indices that represent the <code class="code">text</code> in <code class="code"><span class="string">"&lt;start_Tag&gt;&lt;ws&gt;&lt;text&gt;&lt;ws&gt;&lt;stop_tag&gt;"</span></code>.
    Whitespace is trimmed from the <code class="code">text</code> body.<br>
<b>Returns</b> list of tuples of the starting index of the tag within the string,
     the tag contents with whitespace trimmed, and the index of the first character after 
     the end tag (which may be out of bounds of the string)<br>
</div>

<pre><span id="VALmap_tag"><span class="keyword">val</span> map_tag</span> : <code class="type">sub:Astring.String.sub -><br>       int * string * int -> Astring.String.sub -> Astring.String.sub</code></pre><div class="info ">
<code class="code">map_tag ~sub tag_info body</code> will substitute the tag_info (typically
    returned by <a href="Jekyll_tags.html#VALextract_tag"><code class="code"><span class="constructor">Jekyll_tags</span>.extract_tag</code></a> with the value of <code class="code">sub</code><br>
</div>

<pre><span id="VALmap_tags"><span class="keyword">val</span> map_tags</span> : <code class="type">start_tag:string -><br>       stop_tag:string -><br>       f:(string -> string option) -> Astring.String.sub -> Astring.String.sub</code></pre><div class="info ">
<code class="code">map_tags ~start_tag ~stop_tag ~f body</code> will apply the function <code class="code">f</code>
    to all the tags found that match <code class="code">start_tag</code> and <code class="code">stop_tag</code>. The scanning
    is done via <a href="Jekyll_tags.html#VALextract_tags"><code class="code"><span class="constructor">Jekyll_tags</span>.extract_tags</code></a> and covers all occurrences in <code class="code">body</code>.
    <code class="code">f</code> should return <code class="code"><span class="constructor">None</span></code> if the tag is to be skipped, and <code class="code"><span class="constructor">Some</span> sub</code> where
    <code class="code">sub</code> is the string to substitute into the tag body.<br>
</div>

<pre><span id="VALmap_tag_bodies"><span class="keyword">val</span> map_tag_bodies</span> : <code class="type">start_tag:string -><br>       stop_tag:string -><br>       f_start:(string -> 'a option) -><br>       f_stop:(string -> bool) -><br>       f_map:('a option -> Astring.String.sub -> Astring.String.sub) -><br>       Astring.String.sub -> Astring.String.sub</code></pre><div class="info ">
<code class="code">map_tag_bodies ~start_tag ~stop_tag ~f_start ~f_stop ~f_map body</code> searches
    for tags delimited by <code class="code">start_tag</code> and <code class="code">stop_tag</code>. The tags are pattern
    matched using <code class="code">f_start</code> to find the starting tag, and <code class="code">f_stop</code> for the
    end tag.  When a matching tag pair is found, a substitution is generated
    using <code class="code">f_map</code>, and the resulting substitution is returned with the rest
    of the string unchanged. <code class="code">f_start</code> can pass <code class="code"><span class="constructor">Some</span> args</code> (parsed from the
    start tag body to the <code class="code">f_map</code> function so that tag arguments can be
    handled by the processor.<br>
</div>
<br>
<h1 id="1_Jekyllliquidtagparsingfunctions">Jekyll liquid tag parsing functions</h1><br>

<pre><span id="VALextract_liquid_tag"><span class="keyword">val</span> extract_liquid_tag</span> : <code class="type">?start:int -> string -> (int * string * int) option</code></pre><div class="info ">
<code class="code">extract_liquid_tag</code> behaves as <a href="Jekyll_tags.html#VALextract_tag"><code class="code"><span class="constructor">Jekyll_tags</span>.extract_tag</code></a> but is specialised
    to parse Jekyll liquid tags of the form <code class="code">{% ... %}</code>.<br>
</div>

<pre><span id="VALextract_liquid_tags"><span class="keyword">val</span> extract_liquid_tags</span> : <code class="type">?start:int -> string -> (int * string * int) list</code></pre><div class="info ">
<code class="code">extract_liquid_tags</code> behaves as <a href="Jekyll_tags.html#VALextract_tags"><code class="code"><span class="constructor">Jekyll_tags</span>.extract_tags</code></a> but is specialised
    to parse Jekyll liquid tags of the form <code class="code">{% ... %}</code>.<br>
</div>

<pre><span id="VALmap_liquid_tags"><span class="keyword">val</span> map_liquid_tags</span> : <code class="type">f:(string -> string option) -> Astring.String.sub -> Astring.String.sub</code></pre><div class="info ">
<code class="code">map_liquid_tags ~f body</code> behaves as <a href="Jekyll_tags.html#VALmap_tags"><code class="code"><span class="constructor">Jekyll_tags</span>.map_tags</code></a> but is specialised
    to parse Jekyll liquid tags of the form <code class="code">{% ... %}</code>.<br>
</div>

<pre><span id="VALmap_liquid_tag_bodies"><span class="keyword">val</span> map_liquid_tag_bodies</span> : <code class="type">f_start:(string -> 'a option) -><br>       f_stop:(string -> bool) -><br>       f_map:('a option -> Astring.String.sub -> Astring.String.sub) -><br>       Astring.String.sub -> Astring.String.sub</code></pre><div class="info ">
<code class="code">map_liquid_tag_bodies</code> operates as <a href="Jekyll_tags.html#VALmap_tag_bodies"><code class="code"><span class="constructor">Jekyll_tags</span>.map_tag_bodies</code></a> but is specialised
    to parse Jekyll liquid tags of the form <code class="code">{% ... %}</code>.<br>
</div>
</body></html>